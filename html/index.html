<html>
<head>
  <title>DEMO</title>
  <script src="jquery.min.js"></script>
</head>
<body>
URL1: <input type="text" class="url" /><br />
URL2: <input type="text" class="url" /><br />
URL3: <input type="text" class="url" /><br />
URL4: <input type="text" class="url" /><br />
URL5: <input type="text" class="url" /><br />
URL6: <input type="text" class="url" /><br />
URL7: <input type="text" class="url" /><br />
URL8: <input type="text" class="url" /><br />
URL9: <input type="text" class="url" /><br />
URL10: <input type="text" class="url" /><br />
<br />
<input type="button" id="check" value="check" />
<div id="result"></div>
<script>
  var results = [];

  $('#check').on('click', function () {
    var urls = [];
    $('.url').each(function (index, ele) {
      var value = ele.value;
      if (value !== '') urls.push(value);
    });
    if (urls.length) {
      $.post('/api', { urls: urls, campaignId: 'akdlsjvieowqjwefr' }, function (data) {
        results = Array.prototype.concat.apply(results, data.urls);
        var html = "";
        for(var i = results.length; i--;){
          html += [
            '<h3>',
            results[i].url,
            '</h3>',
            '<p>title: ',
            results[i].title,
            '</p><p>description: ',
            results[i].description,
            '</p>image: <a href="',
            results[i].image,
            '" target="_blank">',
            results[i].image,
            '</a></p>'
          ].join('');
        }
        $('#result').html(html);
        if (!data.finished) _next(data.campaignId);
        if (data.finished) results = [];
      });
    }
  })

  function _next(campaignId) {
    $.post('/api', { campaignId: campaignId }, function (data) {
      results = Array.prototype.concat.apply(results, data.urls);
      var html = "";
      for(var i = results.length; i--;){
        html += [
          '<h3>',
          results[i].url,
          '</h3>',
          '<p>title: ',
          results[i].title,
          '</p><p>description: ',
          results[i].description,
          '</p>image: <a href="',
          results[i].image,
          '" target="_blank">',
          results[i].image,
          '</a></p>'
        ].join('');
      }
      $('#result').html(html);
      if (!data.finished) _next(data.campaignId);
      if (data.finished) results = [];
    });
  }
</script>

</body>
</html>